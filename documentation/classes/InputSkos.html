<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>visualization-component documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">visualization-component documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Classes</li>
  <li >InputSkos</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/khiops-hypertree/models/n/n-tree.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#addChildIds" >addChildIds</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#addOtherNodes" >addOtherNodes</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#addParentId" >addParentId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#conceptToNode" >conceptToNode</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#connectNodesFromMap" >connectNodesFromMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#createAllNodes" >createAllNodes</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#skosToTree" >skosToTree</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>



            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addChildIds"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>addChildIds</b></span>
                        <a href="#addChildIds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addChildIds(conceptList: Object[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="266"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:266</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>conceptList</td>
                                    <td>
                                            <code>Object[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>TreeNode[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addOtherNodes"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>addOtherNodes</b></span>
                        <a href="#addOtherNodes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addOtherNodes(root: <a href="../classes/TreeNode.html" target="_self">TreeNode</a>, conceptList: Object[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="277"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:277</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>root</td>
                                    <td>
                                                <code><a href="../classes/TreeNode.html" target="_self" >TreeNode</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>conceptList</td>
                                    <td>
                                            <code>Object[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/TreeNode.html" target="_self" >TreeNode</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addParentId"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>addParentId</b></span>
                        <a href="#addParentId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addParentId(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="382"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:382</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/TreeNode.html" target="_self" >TreeNode</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="conceptToNode"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>conceptToNode</b></span>
                        <a href="#conceptToNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>conceptToNode(concept: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">Object</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="329"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:329</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>concept</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" >Object</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/TreeNode.html" target="_self" >TreeNode</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="connectNodesFromMap"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>connectNodesFromMap</b></span>
                        <a href="#connectNodesFromMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>connectNodesFromMap(map: literal type)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="341"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:341</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>map</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/TreeNode.html" target="_self" >TreeNode</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createAllNodes"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span class="modifier">Static</span>
                        <span ><b>createAllNodes</b></span>
                        <a href="#createAllNodes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createAllNodes(conceptList: Object[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="312"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:312</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>conceptList</td>
                                    <td>
                                            <code>Object[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{ [id: string]: TreeNode; }</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="skosToTree"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>skosToTree</b></span>
                        <a href="#skosToTree"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>skosToTree(data: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, callback, originalTreeObject: <a href="../interfaces/T.html" target="_self">Tree</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="222"
                            class="link-to-prism">src/app/khiops-hypertree/models/n/n-tree.ts:222</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>callback</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>originalTreeObject</td>
                                    <td>
                                                <code><a href="../interfaces/T.html" target="_self" >Tree</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  parseString
} from &#x27;xml2js&#x27;


declare type WeightFunction &#x3D; (node: TreeNode) &#x3D;&gt; void;

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
class MissingFieldError extends Error {
  fieldname: string;

  constructor(field: string) {
    super(field);
    this.fieldname &#x3D; field;
  }
}

class InvalidFileError extends Error {
  constructor() {
    super();
  }
}

class RDFHelper {
  static getIdFromScheme(scheme: Object): string {
    let schemeProperties: string[] &#x3D; Object.keys(scheme);
    for (let i &#x3D; 0; i &lt; schemeProperties.length; i++) {
      if (schemeProperties[i].indexOf(&#x27;:identifier&#x27;) !&#x3D;&#x3D; -1) {
        let identifier &#x3D; scheme[schemeProperties[i]];
        if (identifier.hasOwnProperty(&#x27;0&#x27;))
          identifier &#x3D; identifier[0];
        return identifier;
      }
    }

    return null;
  }

  static getNameFromScheme(scheme: Object): string {
    let schemeProperties: string[] &#x3D; Object.keys(scheme);
    for (let i &#x3D; 0; i &lt; schemeProperties.length; i++) {
      if (schemeProperties[i].indexOf(&#x27;:title&#x27;) !&#x3D;&#x3D; -1) {
        let identifier &#x3D; scheme[schemeProperties[i]];
        if (identifier.hasOwnProperty(&#x27;0&#x27;))
          identifier &#x3D; identifier[0];
        if (identifier.hasOwnProperty(&#x27;_&#x27;))
          identifier &#x3D; identifier[&#x27;_&#x27;];
        return identifier;
      }
    }

    return null;
  }

  static getIdFromConcept(concept: Object): string {
    let id &#x3D; null;
    if (concept.hasOwnProperty(&#x27;$&#x27;))
      concept &#x3D; concept[&#x27;$&#x27;];
    if (concept.hasOwnProperty(&#x27;rdf:about&#x27;))
      id &#x3D; concept[&#x27;rdf:about&#x27;];

    return id;
  }

  static getNameFromConcept(concept: Object): string {
    //check for prefLabel
    if (concept.hasOwnProperty(&#x27;skos:prefLabel&#x27;)) {
      concept &#x3D; concept[&#x27;skos:prefLabel&#x27;];
      if (concept.hasOwnProperty(&#x27;0&#x27;))
        concept &#x3D; concept[&#x27;0&#x27;];
      if (concept.hasOwnProperty(&#x27;_&#x27;))
        concept &#x3D; concept[&#x27;_&#x27;];
      return String(concept);
    }

    let conceptProperties: string[] &#x3D; Object.keys(concept);
    for (let i &#x3D; 0; i &lt; conceptProperties.length; i++) {
      let currProperty &#x3D; conceptProperties[i];
      if (currProperty.indexOf(&#x27;:title&#x27;) !&#x3D;&#x3D; -1 ||
        currProperty.indexOf(&#x27;Label&#x27;) ||
        currProperty.indexOf(&#x27;Name&#x27;) !&#x3D;&#x3D; -1) {
        let name &#x3D; concept[currProperty];
        if (name.hasOwnProperty(&#x27;0&#x27;))
          name &#x3D; name[0];
        if (name.hasOwnProperty(&#x27;_&#x27;))
          name &#x3D; name[&#x27;_&#x27;];
        return name;
      }
    }

    return null;
  }
}
//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
class InputFile {
  static json: string &#x3D; &#x27;JSON&#x27;;
  static treeML: string &#x3D; &#x27;TREEML&#x27;;
  static skos: string &#x3D; &#x27;SKOS&#x27;;

  static determineFileType(data: string): string {
    try {
      JSON.parse(data);
      return this.json;
    } catch (e) {
      if (data.indexOf(&quot;skos&quot;) !&#x3D; -1) {
        return this.skos;
      }
      return this.treeML;
    }
  }
}

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
class InputJSON {
  static jsonToTree(data: string): TreeNode[] {
    let parsedJson &#x3D; JSON.parse(data);
    try {
      return this.createNodes(parsedJson);;
    } catch (e) {
      // console.log(&quot;Invalid data file.&quot;);
      // console.log(e);
    }
  }

  static createNodes(json: Object[]): TreeNode[] {
    let tree: TreeNode[] &#x3D; [];
    json.forEach((obj: TreeNode) &#x3D;&gt; {
      let node: TreeNode &#x3D; new TreeNode().deserialize(obj);
      tree.push(node);
    });
    return tree;
  }
}

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
class InputTreeML {
  static treemlToTree(data: string, callback, originalTreeObject: Tree) {
    parseString(data, (err, result) &#x3D;&gt; {
      if (err !&#x3D; null) {
        // console.log(&quot;Invalid data file&quot;);
        return null;
      }

      try {
        let rootNode &#x3D; result;
        if (rootNode.hasOwnProperty(&#x27;tree&#x27;))
          rootNode &#x3D; rootNode[&#x27;tree&#x27;];
        if (rootNode.hasOwnProperty(&#x27;branch&#x27;))
          rootNode &#x3D; rootNode[&#x27;branch&#x27;];
        if (rootNode.hasOwnProperty(&#x27;0&#x27;))
          rootNode &#x3D; rootNode[&#x27;0&#x27;];
        let json: Object[] &#x3D; [];
        json.push(this.toJSON(rootNode));
        let tree: TreeNode &#x3D; InputJSON.createNodes(json)[0];
        originalTreeObject.setTree(tree);
        callback(tree);
      } catch (e) {
        // console.log(e);
        // console.log(e.stack);
      }
    })
  }

  private static toJSON(inputNode: Object): Object {
    let resultNode &#x3D; {
      id: &#x27;&#x27;,
      name: &#x27;&#x27;,
      children: null
    };

    //id, name
    if (inputNode.hasOwnProperty(&#x27;attribute&#x27;)) {
      let attributes &#x3D; inputNode[&#x27;attribute&#x27;];
      for (let i &#x3D; 0; i &lt; attributes.length; i++) {
        let attribute &#x3D; attributes[i];
        if (attribute.hasOwnProperty(&#x27;$&#x27;)) {
          attribute &#x3D; attribute[&#x27;$&#x27;];
          if (attribute.hasOwnProperty(&#x27;name&#x27;) &amp;&amp; attribute.hasOwnProperty(&#x27;value&#x27;)) {
            if (attribute[&#x27;name&#x27;] &#x3D;&#x3D; &#x27;id&#x27;) {
              resultNode.id &#x3D; attribute[&#x27;value&#x27;];
            } else if (attribute[&#x27;name&#x27;] &#x3D;&#x3D; &#x27;name&#x27;) {
              resultNode.name &#x3D; attribute[&#x27;value&#x27;];
            }
          }
        }
      }
    }

    if (resultNode.id &#x3D;&#x3D; &#x27;&#x27;)
      resultNode.id &#x3D; resultNode.name;

    //children
    if (inputNode.hasOwnProperty(&#x27;branch&#x27;)) {
      if (resultNode.children &#x3D;&#x3D; null)
        resultNode.children &#x3D; [];
      let branches &#x3D; inputNode[&#x27;branch&#x27;];
      for (let i &#x3D; 0; i &lt; branches.length; i++) {
        resultNode.children.push(this.toJSON(branches[i]));
      }
    }
    if (inputNode.hasOwnProperty(&#x27;leaf&#x27;)) {
      if (resultNode.children &#x3D;&#x3D; null)
        resultNode.children &#x3D; [];
      let leaves &#x3D; inputNode[&#x27;leaf&#x27;];
      for (let i &#x3D; 0; i &lt; leaves.length; i++) {
        resultNode.children.push(this.toJSON(leaves[i]));
      }
    }

    return resultNode;
  }
}

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
class InputSkos {
  static skosToTree(data: string, callback, originalTreeObject: Tree) {
    parseString(data, (err, result) &#x3D;&gt; {
      if (err !&#x3D; null) {
        // console.log(&quot;Invalid data file&quot;, err);
        return null;
      }
      try {
        let rdf &#x3D; result;
        if (rdf.hasOwnProperty(&#x27;rdf:RDF&#x27;))
          rdf &#x3D; rdf[&#x27;rdf:RDF&#x27;];
        let rootNode &#x3D; new TreeNode();
        if (rdf.hasOwnProperty(&#x27;skos:ConceptScheme&#x27;)) {
          let conceptScheme &#x3D; rdf[&#x27;skos:ConceptScheme&#x27;][0];
          rootNode.id &#x3D; RDFHelper.getIdFromScheme(conceptScheme);
          rootNode.name &#x3D; RDFHelper.getNameFromScheme(conceptScheme);
          if (rootNode.id &#x3D;&#x3D; null)
            rootNode.id &#x3D; rootNode.name;

          if (conceptScheme.hasOwnProperty(&#x27;skos:hasTopConcept&#x27;))
            rootNode.children &#x3D; this.addChildIds(conceptScheme[&#x27;skos:hasTopConcept&#x27;]);
          if (rdf.hasOwnProperty(&#x27;skos:Concept&#x27;))
            rdf &#x3D; rdf[&#x27;skos:Concept&#x27;];
          rootNode &#x3D; this.addOtherNodes(rootNode, rdf);
        } else if (rdf.hasOwnProperty(&#x27;rdf:Description&#x27;)) {
          rootNode.id &#x3D; null;
          rdf &#x3D; rdf[&#x27;rdf:Description&#x27;];
          let nodeMap: {
            [id: string]: TreeNode
          } &#x3D; this.createAllNodes(rdf);
          rootNode &#x3D; this.connectNodesFromMap(nodeMap);
          if (rootNode &#x3D;&#x3D; null)
            throw new InvalidFileError();
        }

        originalTreeObject.setTree(rootNode);
        callback(rootNode);
      } catch (e) {
        // console.log(e);
        // console.log(e.stack);
      }

    })
  }

  private static addChildIds(conceptList: Object[]): TreeNode[] {
    let resultArray: TreeNode[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; conceptList.length; i++) {
      let node &#x3D; new TreeNode();
      node.id &#x3D; conceptList[i][&#x27;$&#x27;][&#x27;rdf:resource&#x27;];
      if (resultArray.indexOf(node) &#x3D;&#x3D; -1)
        resultArray.push(node);
    }
    return resultArray;
  }

  private static addOtherNodes(root: TreeNode, conceptList: Object[]) {
    let inTreeNotUsedNodes: TreeNode[] &#x3D; [];
    let nodesWithUndefinedParents: TreeNode[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; conceptList.length; i++) {
      let currentConcept &#x3D; conceptList[i];
      let node: TreeNode &#x3D; this.conceptToNode(currentConcept);

      if (root.id &#x3D;&#x3D; null) {
        root &#x3D; node;
      }
      //is child of some other node
      if (currentConcept.hasOwnProperty(&#x27;skos:inScheme&#x27;)) {
        node.parent &#x3D; this.addParentId(currentConcept[&#x27;skos:inScheme&#x27;][0][&#x27;$&#x27;][&#x27;rdf:resource&#x27;]);
        if (root.addChildToScheme(node, node.parent.id) &#x3D;&#x3D; false)
          nodesWithUndefinedParents.push(node);
      }

      if ((root.setChild(node) &#x3D;&#x3D; false) &amp;&amp; (root !&#x3D; node))
        inTreeNotUsedNodes.push(node);

      for (let j &#x3D; 0; j &lt; inTreeNotUsedNodes.length; j++) {
        inTreeNotUsedNodes[j].parent &#x3D; node;
        if (node.setChild(inTreeNotUsedNodes[j]) &#x3D;&#x3D; true)
          inTreeNotUsedNodes.splice(j, 1);
      }

      for (let k &#x3D; 0; k &lt; nodesWithUndefinedParents.length; k++) {
        if (root.addChildToScheme(nodesWithUndefinedParents[k], nodesWithUndefinedParents[k].parent.id) &#x3D;&#x3D; true)
          nodesWithUndefinedParents.splice(k, 1);
      }
    }

    return root;
  }

  private static createAllNodes(conceptList: Object[]) {
    let resultMap: {
      [id: string]: TreeNode
    } &#x3D; {};
    for (let i &#x3D; 0; i &lt; conceptList.length; i++) {
      let currentConcept &#x3D; conceptList[i];
      let node: TreeNode &#x3D; this.conceptToNode(currentConcept)
      //is child of some other node
      if (currentConcept.hasOwnProperty(&#x27;skos:inScheme&#x27;))
        node.parent &#x3D; this.addParentId(currentConcept[&#x27;skos:inScheme&#x27;][0][&#x27;$&#x27;][&#x27;rdf:resource&#x27;]);

      resultMap[node.id] &#x3D; node;
    }

    return resultMap;
  }

  private static conceptToNode(concept: Object): TreeNode {
    let node &#x3D; new TreeNode();
    node.id &#x3D; RDFHelper.getIdFromConcept(concept);
    node.name &#x3D; RDFHelper.getNameFromConcept(concept);

    //has children
    if (concept.hasOwnProperty(&#x27;skos:narrower&#x27;))
      node.children &#x3D; this.addChildIds(concept[&#x27;skos:narrower&#x27;]);

    return node;
  }

  private static connectNodesFromMap(map: {
    [key: string]: TreeNode
  }): TreeNode {
    for (let nodeId in map) {
      //set parent
      let currNode &#x3D; map[nodeId];
      if (currNode.parent !&#x3D; null) {
        let parentNode &#x3D; map[currNode.parent.id];
        if (parentNode &#x3D;&#x3D; undefined) {
          parentNode &#x3D; new TreeNode();
          parentNode.id &#x3D; currNode.parent.id;
        }
        currNode.parent &#x3D; parentNode;
        parentNode.addChild(currNode);
        map[currNode.parent.id] &#x3D; parentNode;
      }

      //set children
      if (currNode.children) {
        for (let i &#x3D; 0; i &lt; currNode.children.length; i++) {
          let childNode &#x3D; map[currNode.children[i].id];
          childNode.parent &#x3D; currNode;
          currNode.addChild(childNode);
          map[currNode.children[i].id] &#x3D; childNode;
        }
      }

      map[nodeId] &#x3D; currNode;
    }


    let nodeMaxChildren &#x3D; null;
    for (let nodeId in map) {
      if (map[nodeId].children &amp;&amp; !map[nodeId].parent) {
        if (nodeMaxChildren &#x3D;&#x3D; null || nodeMaxChildren.children.length &lt; map[nodeId].children.length)
          nodeMaxChildren &#x3D; map[nodeId];
      }
    }
    return nodeMaxChildren;
  }

  private static addParentId(id: string) {
    let parentNode &#x3D; new TreeNode;
    parentNode.id &#x3D; id;
    return parentNode;
  }

}

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
export class TreeNode {
  //required fields
  id: string;
  children: TreeNode[] &#x3D; null;

  //optional fields:
  parent ? : TreeNode &#x3D; null;
  name ? : string;
  weight ? : number;

  deserialize(input): TreeNode {
    Object.assign(this, input);

    if (!this.hasOwnProperty(&#x27;id&#x27;)) {
      throw new MissingFieldError(&#x27;id&#x27;);
    }
    if (!this.hasOwnProperty(&#x27;children&#x27;)) {
      throw new MissingFieldError(&#x27;children&#x27;);
    }

    this.parent &#x3D; null;
    if (!this.hasOwnProperty(&#x27;name&#x27;)) {
      this.name &#x3D; &#x27;&#x27;;
    }
    this.weight &#x3D; null;

    return this;
  }

  getParent(): TreeNode {
    return this.parent;
  }

  getChildren &#x3D; () &#x3D;&gt; {
    return this.children;
  };

  setParent(parent: TreeNode) {
    this.parent &#x3D; parent;
  }

  //add child to current node
  addChild(child: TreeNode) {
    if (this.children &#x3D;&#x3D; null)
      this.children &#x3D; [];

    let childIndex &#x3D; this.children.findIndex((value, index, object) &#x3D;&gt; {
      return (value.id &#x3D;&#x3D; child.id);
    });
    if (childIndex &#x3D;&#x3D; -1)
      this.children.push(child);
    else
      this.children[childIndex] &#x3D; child;
  }

  getId() {
    return this.id;
  }

  setChild(node: TreeNode) {
    if (this.children &#x3D;&#x3D; null)
      return false;
    for (let i &#x3D; 0; i &lt; this.children.length; i++) {
      if (node.id &#x3D;&#x3D; this.children[i].id) {
        node.parent &#x3D; this;
        this.children[i] &#x3D; node;
        return true;
      }
    }
    for (let i &#x3D; 0; i &lt; this.children.length; i++) {
      if (this.children[i].setChild(node) &#x3D;&#x3D; true)
        return true;
    }
    return false;
  }

  //add child node if it had property skos:inScheme
  addChildToScheme(node: TreeNode, parentId: string) {
    if (this.id &#x3D;&#x3D; parentId) {
      this.addChild(node);
      return true;
    }
    if (this.children &#x3D;&#x3D; null)
      return false;

    for (let i &#x3D; 0; i &lt; this.children.length; i++) {
      if (this.children[i].addChildToScheme(node, parentId) &#x3D;&#x3D; true)
        return true;
    }

    return false;
  }
}

//&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
export class Tree {
  private tree_: TreeNode &#x3D; null;

  constructor(ok, filepath: string) {
    let xhr: XMLHttpRequest &#x3D; new XMLHttpRequest();
    xhr.open(&#x27;GET&#x27;, filepath, true);
    xhr.onreadystatechange &#x3D; () &#x3D;&gt; {
      if (xhr.readyState &#x3D;&#x3D; 4 &amp;&amp; xhr.status &#x3D;&#x3D; 200) {
        let content &#x3D; xhr.responseText;
        let fileType: string &#x3D; InputFile.determineFileType(content);

        if (fileType &#x3D;&#x3D; InputFile.json) {
          this.tree_ &#x3D; InputJSON.jsonToTree(content)[0];
          ok(this.tree_);
        } else if (fileType &#x3D;&#x3D; InputFile.skos) {
          try {
            InputSkos.skosToTree(content, ok, this);
          } catch (e) {
            // console.log(e);
            // console.log(e.stack);
          }
        } else if (fileType &#x3D;&#x3D; InputFile.treeML) {
          InputTreeML.treemlToTree(content, ok, this);
        }
      }
    };
    xhr.send();
  }

  getRootNode() {
    return this.tree_;
  }

  countNodes(node: TreeNode): number {
    let sum: number &#x3D; 0;
    let children: TreeNode[] &#x3D; node.children;
    children.forEach((child: TreeNode) &#x3D;&gt; {
      sum +&#x3D; this.countNodes(child) + 1;
    });

    return sum;
  }

  setTree(tree: TreeNode) {
    this.tree_ &#x3D; tree;
  }
}
</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'InputSkos.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
