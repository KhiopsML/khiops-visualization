<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>visualization-component documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">visualization-component documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >ClustersService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/khiops-covisualization/providers/clusters.service.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#dimensionsDatas" >dimensionsDatas</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#getClusterDatas" >getClusterDatas</a>
                            </li>
                            <li>
                                <a href="#getClustersPerDimDatas" >getClustersPerDimDatas</a>
                            </li>
                            <li>
                                <a href="#getCompositionClusters" >getCompositionClusters</a>
                            </li>
                            <li>
                                <a href="#getCurrentCellsPerCluster" >getCurrentCellsPerCluster</a>
                            </li>
                            <li>
                                <a href="#getCurrentClusterDetailsFromNode" >getCurrentClusterDetailsFromNode</a>
                            </li>
                            <li>
                                <a href="#getDistributionDetailsFromNode" >getDistributionDetailsFromNode</a>
                            </li>
                            <li>
                                <a href="#getInfoPerCluster" >getInfoPerCluster</a>
                            </li>
                            <li>
                                <a href="#getSelectedClustersDetails" >getSelectedClustersDetails</a>
                            </li>
                            <li>
                                <a href="#initialize" >initialize</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(translate: TranslateService, appService: <a href="../injectables/AppService.html" target="_self">AppService</a>, importExtDatasService: <a href="../injectables/ImportExtDatasService.html" target="_self">ImportExtDatasService</a>, importFileLoaderService: <a href="../injectables/ImportFileLoaderService.html" target="_self">ImportFileLoaderService</a>, dimensionsDatasService: <a href="../injectables/DimensionsDatasService.html" target="_self">DimensionsDatasService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:48</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>translate</td>
                                                  
                                                        <td>
                                                                    <code>TranslateService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>appService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AppService.html" target="_self" >AppService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>importExtDatasService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ImportExtDatasService.html" target="_self" >ImportExtDatasService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>importFileLoaderService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ImportFileLoaderService.html" target="_self" >ImportFileLoaderService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>dimensionsDatasService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DimensionsDatasService.html" target="_self" >DimensionsDatasService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getClusterDatas"></a>
                    <span class="name">
                        <span ><b>getClusterDatas</b></span>
                        <a href="#getClusterDatas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getClusterDatas(dimensionIndex, clusterName)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="64"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:64</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dimensionIndex</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>clusterName</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getClustersPerDimDatas"></a>
                    <span class="name">
                        <span ><b>getClustersPerDimDatas</b></span>
                        <a href="#getClustersPerDimDatas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getClustersPerDimDatas(rank)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="231"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:231</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>rank</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCompositionClusters"></a>
                    <span class="name">
                        <span ><b>getCompositionClusters</b></span>
                        <a href="#getCompositionClusters"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCompositionClusters(hierarchyName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, node: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="278"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:278</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>hierarchyName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentCellsPerCluster"></a>
                    <span class="name">
                        <span ><b>getCurrentCellsPerCluster</b></span>
                        <a href="#getCurrentCellsPerCluster"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCurrentCellsPerCluster()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="81"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:81</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentClusterDetailsFromNode"></a>
                    <span class="name">
                        <span ><b>getCurrentClusterDetailsFromNode</b></span>
                        <a href="#getCurrentClusterDetailsFromNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCurrentClusterDetailsFromNode(nodes, currentClusterDetailsFromNode: [])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="89"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:89</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>nodes</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentClusterDetailsFromNode</td>
                                    <td>
                                            <code>[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDistributionDetailsFromNode"></a>
                    <span class="name">
                        <span ><b>getDistributionDetailsFromNode</b></span>
                        <a href="#getDistributionDetailsFromNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDistributionDetailsFromNode(currentIndex, otherIndex)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="106"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:106</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentIndex</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>otherIndex</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{ datasets: {}; labels: {}; }</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getInfoPerCluster"></a>
                    <span class="name">
                        <span ><b>getInfoPerCluster</b></span>
                        <a href="#getInfoPerCluster"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getInfoPerCluster(rank: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="187"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:187</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>rank</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSelectedClustersDetails"></a>
                    <span class="name">
                        <span ><b>getSelectedClustersDetails</b></span>
                        <a href="#getSelectedClustersDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSelectedClustersDetails()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="72"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:72</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initialize"></a>
                    <span class="name">
                        <span ><b>initialize</b></span>
                        <a href="#initialize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>initialize()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="60"
                            class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:60</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dimensionsDatas"></a>
                    <span class="name">
                        <span ><b>dimensionsDatas</b></span>
                        <a href="#dimensionsDatas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/khiops-covisualization/providers/clusters.service.ts:48</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
	Injectable
} from &#x27;@angular/core&#x27;;
import {
	DimensionsDatasService
} from &#x27;./dimensions-datas.service&#x27;;
import {
	TreeNodeVO
} from &#x27;../model/tree-node-vo&#x27;;
import {
	ChartDatasetVO
} from &#x27;@khiops-library/model/chartDataset-vo&#x27;;
import {
	TranslateService
} from &#x27;@ngstack/translate&#x27;;
import {
	DimensionVO
} from &#x27;@khiops-library/model/dimension-vo&#x27;;
import {
	AppService
} from &#x27;./app.service&#x27;;
import {
	CellVO
} from &#x27;@khiops-library/model/cell-vo&#x27;;
import {
	CompositionVO
} from &#x27;../model/composition-vo&#x27;;
import {
	UtilsService
} from &#x27;@khiops-library/providers/utils.service&#x27;;
import {
	ImportExtDatasService
} from &#x27;./import-ext-datas.service&#x27;;
import {
	ExtDatasVO
} from &#x27;../model/ext-datas-vo&#x27;;
import {
	ImportFileLoaderService
} from &#x27;@khiops-library/components/import-file-loader/import-file-loader.service&#x27;;
import {
	FileVO
} from &#x27;@khiops-library/model/file-vo&#x27;;
@Injectable({
	providedIn: &#x27;root&#x27;
})
export class ClustersService {

	dimensionsDatas: any;

	constructor(
		private translate: TranslateService,
		private appService: AppService,
		private importExtDatasService: ImportExtDatasService,
		private importFileLoaderService: ImportFileLoaderService,
		private dimensionsDatasService: DimensionsDatasService
	) {
		this.initialize();
	}

	initialize() {
		this.dimensionsDatas &#x3D; this.dimensionsDatasService.getDatas();
	}

	getClusterDatas(dimensionIndex, clusterName) {
		let clusterDatas;
		if (this.dimensionsDatas.dimensionsClusters[dimensionIndex]) {
			clusterDatas &#x3D; this.dimensionsDatas.dimensionsClusters[dimensionIndex].find(e &#x3D;&gt; e.cluster &#x3D;&#x3D;&#x3D; clusterName);
		}
		return clusterDatas;
	}

	getSelectedClustersDetails() {
		const details &#x3D; [];
		for (let i &#x3D; 0; i &lt; this.dimensionsDatas.dimensions.length; i++) {
			details.push(this.getCurrentClusterDetailsFromNode(this.dimensionsDatas.dimensionsTrees[i]));

		}
		return details;
	}

	getCurrentCellsPerCluster() {
		let currentCellsPerCluster &#x3D; 1;
		for (let i &#x3D; 0; i &lt; this.dimensionsDatas.dimensions.length; i++) {
			currentCellsPerCluster &#x3D; currentCellsPerCluster * this.dimensionsDatas.dimensions[i].currentHierarchyClusterCount;
		}
		return currentCellsPerCluster;
	}

	getCurrentClusterDetailsFromNode(nodes, currentClusterDetailsFromNode &#x3D; []): any {
		const nodesLength &#x3D; nodes.length;
		for (let i &#x3D; 0; i &lt; nodesLength; i++) {
			const currentNode: TreeNodeVO &#x3D; nodes[i];
			if (currentNode.isLeaf) {
				currentClusterDetailsFromNode.push(currentNode);
			} else {
				if (currentNode.isCollapsed) {
					currentClusterDetailsFromNode.push(currentNode);
				} else {
					this.getCurrentClusterDetailsFromNode(currentNode.children, currentClusterDetailsFromNode);
				}
			}
		}
		return currentClusterDetailsFromNode;
	}

	getDistributionDetailsFromNode(currentIndex, otherIndex) {
		// if (currentIndex &#x3D;&#x3D;&#x3D; 0) {
		// 	currentIndex &#x3D; 1;
		// } else {
		// 	currentIndex &#x3D; 0;
		// }

		let distributionsGraphDetails &#x3D; {
			datasets: [],
			labels: []
		};
		const t0 &#x3D; performance.now();
		if (this.dimensionsDatas.selectedNodes.length &gt;&#x3D; 2) {

			let currentYpart &#x3D; this.dimensionsDatas.selectedNodes[0].name;
			let currentDisplayYpart &#x3D; this.dimensionsDatas.selectedNodes[0].shortDescription;

			// let otherIndex &#x3D; 0;
			if (currentIndex &#x3D;&#x3D;&#x3D; 0) {
				// otherIndex &#x3D; 1;
				currentYpart &#x3D; this.dimensionsDatas.selectedNodes[1].name;
				currentDisplayYpart &#x3D; this.dimensionsDatas.selectedNodes[1].shortDescription;
			}

			const currentDataSet &#x3D; new ChartDatasetVO(currentDisplayYpart);

			const filteredDimensionsClusters &#x3D; this.getCurrentClusterDetailsFromNode(this.dimensionsDatas.dimensionsTrees[currentIndex]);

			// First filter the cells by Ypart to optimize computing
			const filteredYAxisCurrentYpart &#x3D; this.dimensionsDatas.matrixDatas.matrixCellDatas.filter(e &#x3D;&gt; e.yaxisPart &#x3D;&#x3D;&#x3D; currentYpart);
			const filteredXAxisCurrentYpart &#x3D; this.dimensionsDatas.matrixDatas.matrixCellDatas.filter(e &#x3D;&gt; e.xaxisPart &#x3D;&#x3D;&#x3D; currentYpart);

			const filteredDimensionsClustersLength &#x3D; filteredDimensionsClusters.length;
			for (let i &#x3D; 0; i &lt; filteredDimensionsClustersLength; i++) {
				const currentXpart &#x3D; filteredDimensionsClusters[i].name;
				const currentDisplayXpart &#x3D; filteredDimensionsClusters[i].shortDescription;
				distributionsGraphDetails.labels.push(currentDisplayXpart);

				let currentDataValue &#x3D; 0;

				let cell: CellVO;
				if (!this.dimensionsDatas.selectedNodes[otherIndex].isLeaf &amp;&amp; !this.dimensionsDatas.selectedNodes[otherIndex].isCollapsed) {
					// if it is a node and it is collapsed, concat values of children leafs
					const childrenLeafListLength &#x3D; this.dimensionsDatas.selectedNodes[otherIndex].childrenLeafList.length;
					for (let j &#x3D; 0; j &lt; childrenLeafListLength; j++) {
						const currentChild &#x3D; this.dimensionsDatas.selectedNodes[otherIndex].childrenLeafList[j];
						if (currentIndex &#x3D;&#x3D;&#x3D; 0) {
							cell &#x3D; this.dimensionsDatas.matrixDatas.matrixCellDatas.find(e &#x3D;&gt; e.yaxisPart &#x3D;&#x3D;&#x3D; currentChild &amp;&amp; e.xaxisPart &#x3D;&#x3D;&#x3D; currentXpart);
						} else {
							cell &#x3D; this.dimensionsDatas.matrixDatas.matrixCellDatas.find(e &#x3D;&gt; e.yaxisPart &#x3D;&#x3D;&#x3D; currentXpart &amp;&amp; e.xaxisPart &#x3D;&#x3D;&#x3D; currentChild);
						}
						if (cell) {
							currentDataValue &#x3D; currentDataValue + cell.displayedFreqValue;
						}
					}
				} else {
					if (currentIndex &#x3D;&#x3D;&#x3D; 0) {
						cell &#x3D; filteredYAxisCurrentYpart.find(e &#x3D;&gt; e.xaxisPart &#x3D;&#x3D;&#x3D; currentXpart);
					} else {
						cell &#x3D; filteredXAxisCurrentYpart.find(e &#x3D;&gt; e.yaxisPart &#x3D;&#x3D;&#x3D; currentXpart);
					}
					if (cell) {
						currentDataValue &#x3D; cell.displayedFreqValue;
					}
				}
				currentDataSet.data.push(currentDataValue);
			}
			distributionsGraphDetails.datasets.push(currentDataSet);

		}

		// Init obj if error or no value
		if (distributionsGraphDetails.labels.length &#x3D;&#x3D;&#x3D; 0) {
			distributionsGraphDetails &#x3D; undefined;
		}
		const t1 &#x3D; performance.now();
		// console.info(&quot;getDistributionDetailsFromNode took &quot; + (t1 - t0) + &quot; milliseconds.&quot;);

		return distributionsGraphDetails;
	}

	getInfoPerCluster(rank: number): any {
		const appDatas &#x3D; this.appService.getDatas().datas;
		const infoPerCluster &#x3D; {
			datasets: [],
			labels: []
		};

		let currentDataSet: ChartDatasetVO;
		currentDataSet &#x3D; new ChartDatasetVO(&#x27;info&#x27;, &#x27;line&#x27;);

		for (let j &#x3D; this.dimensionsDatas.dimensions.length - 1; j &lt;&#x3D; this.dimensionsDatas.hierarchyDatas.totalClusters; j++) {
			let currentCluster;
			for (let i &#x3D; 0; i &lt; this.dimensionsDatas.dimensions.length; i++) {
				const currentDimensionHierarchy: any &#x3D; appDatas.coclusteringReport.dimensionHierarchies[i];
				currentCluster &#x3D; currentDimensionHierarchy.clusters.find(e &#x3D;&gt; e.hierarchicalRank &#x3D;&#x3D;&#x3D; j + 1);
				if (currentCluster) {
					break;
				}
			}
			let currentInfo &#x3D; currentCluster &amp;&amp; currentCluster.hierarchicalLevel * 100 || 0;
			if (currentInfo &lt; 0) {
				currentInfo &#x3D; 0;
			}
			currentDataSet.data.push(currentInfo);
		}
		infoPerCluster.datasets.push(currentDataSet);

		currentDataSet &#x3D; new ChartDatasetVO(this.translate.get(&#x27;GLOBAL.NUMBER_OF_CLUSTERS&#x27;));
		currentDataSet.maxBarThickness &#x3D; 5;
		currentDataSet.barThickness &#x3D; 5;

		for (let j &#x3D; this.dimensionsDatas.dimensions.length - 1; j &lt; this.dimensionsDatas.hierarchyDatas.totalClusters; j++) {
			infoPerCluster.labels.push(j + 1);
			let currentValue &#x3D; 0;
			if (j + 1 &#x3D;&#x3D;&#x3D; rank) {
				currentValue &#x3D; infoPerCluster.datasets[0].data[rank - this.dimensionsDatas.dimensions.length];
			}
			currentDataSet.data.push(currentValue);
		}
		infoPerCluster.datasets.push(currentDataSet);

		return infoPerCluster;
	}

	getClustersPerDimDatas(rank): any {
		const clustersPerDimDatas &#x3D; {
			datasets: [],
			labels: []
		};
		let maxGraphValue &#x3D; 0;

		let currentDataSet: ChartDatasetVO;

		for (let i &#x3D; 0; i &lt; this.dimensionsDatas.dimensions.length; i++) {

			currentDataSet &#x3D; new ChartDatasetVO(this.dimensionsDatas.dimensions[i].name, &#x27;line&#x27;);

			let rankedCount &#x3D; 1;
			for (let j &#x3D; this.dimensionsDatas.dimensions.length - 1; j &lt;&#x3D; this.dimensionsDatas.hierarchyDatas.totalClusters; j++) {
				const isCurrentNodeRanked &#x3D; this.dimensionsDatas.dimensionsClusters[i].find(e &#x3D;&gt; e.hierarchicalRank &#x3D;&#x3D;&#x3D; j &amp;&amp; !e.isLeaf);
				if (isCurrentNodeRanked) {
					rankedCount++;
				}
				currentDataSet.data.push(rankedCount);
			}
			clustersPerDimDatas.datasets.push(currentDataSet);
		}

		for (let k &#x3D; 0; k &lt; clustersPerDimDatas.datasets.length; k++) {
			if (clustersPerDimDatas.datasets[k].data[rank - this.dimensionsDatas.dimensions.length] &gt; maxGraphValue) {
				maxGraphValue &#x3D; clustersPerDimDatas.datasets[k].data[rank - this.dimensionsDatas.dimensions.length];
			}
		}

		currentDataSet &#x3D; new ChartDatasetVO(this.translate.get(&#x27;GLOBAL.NUMBER_OF_CLUSTERS&#x27;));
		currentDataSet.maxBarThickness &#x3D; 5;
		currentDataSet.barThickness &#x3D; 5;

		for (let j &#x3D; this.dimensionsDatas.dimensions.length - 1; j &lt; this.dimensionsDatas.hierarchyDatas.totalClusters; j++) {
			clustersPerDimDatas.labels.push(j + 1);
			let currentValue &#x3D; 0;
			if (j + 1 &#x3D;&#x3D;&#x3D; rank) {
				currentValue &#x3D; maxGraphValue;
			}
			currentDataSet.data.push(currentValue);
		}
		clustersPerDimDatas.datasets.push(currentDataSet);

		return clustersPerDimDatas;
	}

	getCompositionClusters(hierarchyName: string, node: any) {

		const appDatas &#x3D; this.appService.getDatas().datas;
		const compositionValues &#x3D; [];

		if (appDatas.coclusteringReport &amp;&amp; appDatas.coclusteringReport.dimensionPartitions) {

			const currentDimensionDetails: DimensionVO &#x3D; this.dimensionsDatas.dimensions.find(e &#x3D;&gt; e.name &#x3D;&#x3D;&#x3D; hierarchyName);

			// Composition only available for numerical Dimensions
			if (currentDimensionDetails &amp;&amp; currentDimensionDetails.isCategorical) {

				if (node.childrenLeafList) {

					const currentIndex: any &#x3D; this.dimensionsDatas.selectedDimensions.findIndex(e &#x3D;&gt; {
						return hierarchyName &#x3D;&#x3D;&#x3D; e.name;
					});
					const currentDimensionClusters &#x3D; Object.assign([], this.dimensionsDatas.dimensionsClusters[currentIndex]);

					// Check if external data file is saved
					const currentDimension &#x3D; this.dimensionsDatas.selectedDimensions[currentIndex];
					const externalDatas: ExtDatasVO &#x3D; this.importExtDatasService.getImportedDatasFromDimension(currentDimension);

					const childrenLeafListLength &#x3D; node.childrenLeafList.length;
					for (let i &#x3D; 0; i &lt; childrenLeafListLength; i++) {

						const currentLeafName &#x3D; node.childrenLeafList[i];

						// Check if this name has been updated
						const currentClusterDetails &#x3D; currentDimensionDetails.valueGroups.find(e &#x3D;&gt; e.cluster &#x3D;&#x3D;&#x3D; currentLeafName);
						const currentClusterDetailsLength &#x3D; currentClusterDetails.values.length;
						for (let j &#x3D; 0; j &lt; currentClusterDetailsLength; j++) {
							const currentDimensionHierarchyCluster: any &#x3D; currentDimensionClusters.find(e &#x3D;&gt; e.cluster &#x3D;&#x3D;&#x3D; currentLeafName);
							const composition &#x3D; new CompositionVO(currentClusterDetails, currentDimensionHierarchyCluster, j, externalDatas);
							compositionValues.push(composition);
						}
					}

					// Now for each collapsed nodes, change all children names to node name
					// Find current dim position
					const currentCollapsedNodes: TreeNodeVO[] &#x3D; UtilsService.fastFilter(currentDimensionClusters, e &#x3D;&gt; {
						return e.isCollapsed;
					});
					const currentCollapsedNodesLength &#x3D; currentCollapsedNodes.length;
					for (let k &#x3D; 0; k &lt; currentCollapsedNodesLength; k++) {
						const compositionValuesLength &#x3D; compositionValues.length;
						for (let l &#x3D; 0; l &lt; compositionValuesLength; l++) {
							if (currentCollapsedNodes[k].childrenLeafList.includes(compositionValues[l]._id)) {
								compositionValues[l].cluster &#x3D; currentCollapsedNodes[k].shortDescription;
							}
						}
					}
				}

			}
		}

		return compositionValues;
	}

}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ClustersService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
