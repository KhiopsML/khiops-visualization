<div
  class="hierarchy-select-comp scrollbar-thin"
  fxLayout="column"
  fxLayoutAlign="end center"
>
  <div
    class="comp-header-tools"
    fxFlex
    fxLayout="row"
    fxLayoutAlign="start center"
  >
    <h1 title="{{ 'TOOLTIPS.AXIS.DIMENSION.STATISTICS' | translate }}">
      {{ 'GLOBAL.HIERARCHY' | translate }}
    </h1>
    <div fxFlex>
      <button
        class="button-accent hierarchy-select-comp-button"
        title="{{ 'TOOLTIPS.AXIS.DIMENSION.SELECT' | translate }}"
        mat-stroked-button
        color="accent"
        [matMenuTriggerFor]="selectDimension"
      >
        {{ selectedDimension?.name }}
        <em class="screenshot-hide"
          ><mat-icon>keyboard_arrow_down</mat-icon>
        </em>
      </button>
      <mat-menu #selectDimension>
        @for (
          dimension of dimensions;
          track dimension.name || dimension;
          let i = $index
        ) {
          <button
            mat-menu-item
            [class.selected-item]="dimension.name === selectedDimension?.name"
            (click)="changeSelectedDimension(dimension, i)"
          >
            {{ dimension.name }}
          </button>
        }
      </mat-menu>
    </div>
    @if (dimensionsDatasService.dimensionsDatas?.isLoading) {
      <mat-spinner
        diameter="20"
        color="accent"
        mode="indeterminate"
      ></mat-spinner>
    }
    <app-variable-search-button
      [selectedDimension]="selectedDimension"
    ></app-variable-search-button>
    <button
      class="hierarchy-infos-button screenshot-hide"
      mat-icon-button
      color="accent"
      attr.aria-label="{{ 'TOOLTIPS.AXIS.DIMENSION.STATISTICS' | translate }}"
      matTooltip="{{ 'GLOBAL.STATISTICS' | translate }}"
      (click)="onClickOnShowStats()"
      [ngClass]="{ enabled: showStats }"
    >
      <mat-icon>info</mat-icon>
    </button>
    <!-- Slot for custom header tools -->
    <ng-content select="[slot=header-tools]"></ng-content>
  </div>
  @if (showStats) {
    <div
      class="hierarchy-select-content"
      [@slideInOut]
      fxLayoutAlign="start start"
      fxLayout="column"
    >
      <table class="stats-table">
        <tr>
          <td>{{ 'GLOBAL.TYPE' | translate }}</td>
          <td>
            <strong>{{ selectedTreeCluster?.dimensionType }}</strong>
          </td>
        </tr>
        @if (selectedTreeCluster?.isNumerical) {
          <tr>
            <td>{{ 'GLOBAL.INTERVALS' | translate }}</td>
            <td>
              <strong>{{ selectedTreeCluster?.intervals }}</strong>
            </td>
          </tr>
        }
        @if (selectedTreeCluster?.isCategorical) {
          <tr>
            <td>{{ 'GLOBAL.CLUSTERS' | translate }}</td>
            <td>
              <strong>{{ selectedTreeCluster?.intervals }}</strong>
            </td>
          </tr>
        }
        @if (selectedDimension?.isNumerical) {
          <tr>
            <td>{{ 'GLOBAL.INTERVAL' | translate }}</td>
            <td>
              <strong>{{ selectedTreeCluster?.interval }}</strong>
            </td>
          </tr>
        }
        @if (selectedDimension?.isCategorical) {
          <tr>
            <td>{{ 'GLOBAL.CLUSTER' | translate }}</td>
            <td>
              <strong>{{ selectedTreeCluster?.interval }}</strong>
            </td>
          </tr>
        }
        @if (selectedTreeCluster?.isCategorical) {
          <tr>
            <td>{{ 'GLOBAL.CLUSTER_LENGTH' | translate }}</td>
            <td>
              <strong>{{ selectedTreeCluster?.nbClusters }}</strong>
            </td>
          </tr>
        }
        <tr>
          <td>{{ 'GLOBAL.FREQUENCY' | translate }}</td>
          <td>
            <strong>{{ selectedTreeCluster?.frequency }}</strong>
          </td>
        </tr>
      </table>
    </div>
  }
</div>
